<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Channel Hub</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-950 text-white font-sans">
  <!-- Header with Banner + Avatar -->
  <header class="relative">
    <img src="channels4_banner.jpg" alt="Banner" class="w-full h-48 object-cover">
    <div class="absolute left-1/2 -bottom-12 transform -translate-x-1/2">
      <img src="channels4_profile.jpg" alt="Profile"
        class="w-28 h-28 rounded-full border-4 border-white shadow-xl">
    </div>
  </header>

  <!-- Channel Info -->
  <section class="text-center mt-16">
    <h1 class="text-3xl font-bold">üî• Channel Hub üî•</h1>
    <p id="subCount" class="text-lg text-red-400 mt-2">Loading subscribers...</p>
    <a href="https://discord.gg/qV5Z7yatRZ" target="_blank"
      class="mt-4 inline-block px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-500 transition">
      Join Discord
    </a>
  </section>

  <!-- Latest Video -->
  <section class="max-w-4xl mx-auto px-6 py-12">
    <h2 class="text-2xl font-bold mb-4 text-center">Latest Video</h2>
    <div id="latestVideo" class="aspect-w-16 aspect-h-9 bg-gray-800 rounded-xl shadow-lg overflow-hidden">
      <p class="p-4">Loading...</p>
    </div>
  </section>

  <!-- Video Gallery -->
  <section class="max-w-6xl mx-auto px-6 py-12">
    <h2 class="text-2xl font-bold mb-6 text-center">All Videos</h2>
    <div id="videoGallery" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6"></div>
  </section>

  <!-- Footer -->
  <footer class="text-center py-6 border-t border-gray-700">
    <p>&copy; 2025 Channel Hub. Built with ‚ù§Ô∏è</p>
  </footer>

  <script>
    const API_KEY = "AIzaSyBK9MnL31-me4ud0bHfPooJd-uo3tPwwPc";
    const CHANNEL_ID = "UCYLjsfhkcebx4B-DhNDTqUw"; // Replace with real channel ID
    const MAX_RESULTS = 9; // number of videos in gallery

    async function fetchChannelData() {
      try {
        // Get subscriber count
        const channelRes = await fetch(
          `https://www.googleapis.com/youtube/v3/channels?part=statistics&id=${CHANNEL_ID}&key=${API_KEY}`
        );
        const channelData = await channelRes.json();
        const subs = channelData.items[0].statistics.subscriberCount;
        document.getElementById("subCount").textContent = subs.toLocaleString() + " subscribers";

        // Get latest video
        const videoRes = await fetch(
          `https://www.googleapis.com/youtube/v3/search?part=snippet&channelId=${CHANNEL_ID}&order=date&maxResults=1&type=video&key=${API_KEY}`
        );
        const videoData = await videoRes.json();
        const latestVid = videoData.items[0].id.videoId;
        document.getElementById("latestVideo").innerHTML = `
          <iframe width="100%" height="400"
            src="https://www.youtube.com/embed/${latestVid}"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen
            class="w-full h-full">
          </iframe>
        `;

        // Video gallery
        const galleryRes = await fetch(
          `https://www.googleapis.com/youtube/v3/search?part=snippet&channelId=${CHANNEL_ID}&order=date&maxResults=${MAX_RESULTS}&type=video&key=${API_KEY}`
        );
        const galleryData = await galleryRes.json();
        const gallery = document.getElementById("videoGallery");
        gallery.innerHTML = galleryData.items.map(item => `
          <a href="https://www.youtube.com/watch?v=${item.id.videoId}" target="_blank"
            class="block bg-gray-900 rounded-lg shadow hover:scale-105 transform transition">
            <img src="${item.snippet.thumbnails.medium.url}" class="w-full rounded-t-lg">
            <div class="p-4">
              <h3 class="font-bold text-sm">${item.snippet.title}</h3>
            </div>
          </a>
        `).join("");
      } catch (err) {
        console.error(err);
        document.getElementById("subCount").textContent = "Error loading subscribers";
        document.getElementById("latestVideo").innerHTML = "<p class='p-4'>Error loading video.</p>";
      }
    }

    fetchChannelData();
  </script>
</body>
</html>
